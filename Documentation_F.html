<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation Méthode Multi-modale, Nettoyage Texte et Analyse Sentiment</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; background-color: #f5f5f5; }
        h1, h2 { color: #333; }
        code { background-color: #eaeaea; padding: 2px 5px; border-radius: 3px; }
        pre { background-color: #eaeaea; padding: 10px; border-radius: 5px; overflow-x: auto; }
        section { background-color: #fff; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
        .diagram { display: flex; justify-content: space-around; margin-top: 20px; flex-wrap: wrap; }
        .box { background-color: #eaeaea; padding: 15px; border-radius: 8px; text-align: center; width: 20%; margin-bottom: 10px; }
        .arrow { width: 5%; text-align: center; font-size: 24px; line-height: 80px; }
        .images { display: flex; justify-content: center; gap: 30px; margin: 20px 0; }
        .images img { width: 300px; height: 200px; object-fit: cover; cursor: pointer; border-radius: 8px; box-shadow: 0 0 8px rgba(0,0,0,0.2); }
        .caption { text-align: center; font-style: italic; margin-top: 5px; }

        /* Modal style */
        .modal { display: none; position: fixed; z-index: 1000; padding-top: 60px; left: 0; top: 0; width: 100%; height: 100%; overflow: auto;
                 background-color: rgba(0,0,0,0.8); }
        .modal-content { margin: auto; display: block; max-width: 90%; max-height: 80%; border-radius: 10px; }
        .modal-caption { text-align: center; color: #fff; margin-top: 10px; }
        .close { position: absolute; top: 20px; right: 35px; color: #fff; font-size: 40px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<h1>Documentation Complète : Multi-modale, Nettoyage Texte et Analyse de Sentiment</h1>

<section>
<h2>1️⃣ Nettoyage des textes</h2>
<p>Le texte est nettoyé de manière multilingue :</p>
<ul>
    <li>Détection automatique de la langue.</li>
    <li>Conversion en minuscules.</li>
    <li>Suppression de la ponctuation.</li>
    <li>Suppression des stopwords selon la langue détectée (anglais par défaut).</li>
</ul>

<div class="images">
    <div>
        <img src="raw_text_example.png" alt="Texte brut" onclick="openModal(this)">
        <div class="caption">Exemple de données brutes avec ponctuation, majuscules et mots inutiles.</div>
    </div>
    <div>
        <img src="cleaned_text_example.png" alt="Texte nettoyé" onclick="openModal(this)">
        <div class="caption">Exemple de données nettoyé.</div>
    </div>
</div>

<!-- Modal pour affichage des images -->
<div id="imgModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="modalImg">
    <div class="modal-caption" id="modalCaption"></div>
</div>

<!-- <pre><code>def clean_text(text):
    if pd.isna(text):
        return ""
    try:
        lang = detect(text)
    except:
        lang = "en"
    stop_words = set(stopwords.words(lang)) if lang in stopwords.fileids() else set(stopwords.words("english"))
    text = text.lower()
    text = text.translate(str.maketrans("", "", string.punctuation))
    tokens = [word for word in text.split() if word not in stop_words]
    return " ".join(tokens)</code></pre> -->
</section>

<section>
<h2>3️⃣ Hyperparameter-tuning RandomForest</h2>
<p>Recherche des meilleurs hyperparamètres pour <strong>RandomForest</strong> avec validation croisée :</p>

<div class="images">
    <div>
        <img src="RF_hyper.png" alt="Courbe de tuning RandomForest" onclick="openModal(this)">
        <div class="caption">Variation de la performance selon le nombre d’estimateurs et la profondeur.</div>
    </div>
    <div>
        <img src="RF_hyper_tf_df.png" alt="Optimisation TF-IDF RandomForest" onclick="openModal(this)">
        <div class="caption">Optimisation conjointe de TF-IDF max_features et RandomForest.</div>
    </div>
</div>

<ul>
    <li><strong>Best RMSE</strong> : 0.4161 avec paramètres (n_estimators=220, max_depth=7)</li>
    <li><strong>Best TF-IDF max_features</strong> : 260 avec RMSE=0.415</li>
</ul>
</section>

<section>
<h2>6️⃣ Modèle CatBoost pour données multi-modales</h2>
<p>En complément du RandomForest, <strong>CatBoost</strong> est utilisé pour traiter efficacement les données hétérogènes :</p>
<ul>
    <li>Support natif des <strong>données catégorielles</strong> (ex. <code>ASIN</code>) sans besoin de One-hot encoding.</li>
    <li>Gestion automatique des <strong>valeurs manquantes</strong>.</li>
    <li>Robuste aux <strong>déséquilibres de classes</strong> et aux jeux de données bruités.</li>
    <li>Peut être combiné avec les <strong>features d’images</strong> extraites (ResNet18).</li>
</ul>

<div class="images">
    <div>
        <img src="cat_hyper.png" alt="Entraînement CatBoost" onclick="openModal(this)">
        <div class="caption">Exemple d’entraînement CatBoost avec early stopping.</div>
    </div>
    <div>
        <img src="cat_hyper_tf.png" alt="Résultats CatBoost" onclick="openModal(this)">
        <div class="caption">Comparaison des performances : CatBoost vs RandomForest.</div>
    </div>
</div>

<ul>
    <li><strong>Best max_features</strong> : 300 → RMSE = 0.3484</li>
    <li><strong>Best CatBoost parameters</strong> : {iterations=350, learning_rate=0.3, depth=6} → RMSE = 0.4138</li>
</ul>
</section>



    
<section>
<h2>2️⃣ Analyse de sentiment avec VADER</h2>
<p>Après nettoyage, une analyse de sentiment est effectuée :</p>
<ul>
    <li>VADER attribue un score de sentiment (<strong>positif</strong>, <strong>neutre</strong>, <strong>négatif</strong>).</li>
    <li>Le score "compound" sert de seuil de classification.</li>
    <li><code>review_title</code> et <code>review_body</code> sont combinés pour créer <code>full_review</code>.</li>
</ul>

<div class="images">
    <div>
        <img src="database_example.png" alt="Exemple de base de données avec reviews" onclick="openModal(this)">
        <div class="caption">Exemple de base de données de reviews avant et après ajout du sentiment.</div>
    </div>
</div>

<!-- <pre><code>def get_sentiment(text):
    scores = sia.polarity_scores(text)
    compound = scores["compound"]
    if compound >= 0.05: return "positive"
    elif compound <= -0.05: return "negative"
    else: return "neutral"

df["full_review"] = df["review_title"] + " " + df["review_body"]
df["review_sentiment"] = df["full_review"].apply(get_sentiment)</code></pre> -->
</section>


<section>
<h2>3️⃣ Combinaison multi-modale pour prédiction</h2>
<p>Les caractéristiques utilisées dans le modèle supervisé :</p>
<ul>
    <li><strong>Texte nettoyé → TF-IDF</strong> (titre, review)</li>
    <li><strong>ASIN</strong> → One-hot encoding</li>
    <li><strong>Prix</strong> → Normalisation</li>
    <li><strong>Image</strong> → ResNet18 features</li>
    <li><strong>Sentiment</strong> → Score VADER (feature additionnelle)</li>
</ul>
<pre><code>X_final = [TF-IDF texte nettoyé | One-hot ASIN | Prix normalisé | Features image | Sentiment]</code></pre>
</section>

<section>
<h2>4️⃣ Schéma global du pipeline</h2>
<div class="diagram">
    <div class="box">Base de données brute<br>(Texte, Prix, ASIN, Image)</div>
    <div class="arrow">➔</div>
    <div class="box">Nettoyage Texte<br>(suppression stopwords, normalisation)</div>
    <div class="arrow">➔</div>
    <div class="box">Analyse de Sentiment<br>(VADER)</div>
    <div class="arrow">➔</div>
    <div class="box">Extraction de Features<br>TF-IDF | One-hot | Normalisation | ResNet18</div>
    <div class="arrow">➔</div>
    <div class="box">Concaténation</div>
    <div class="arrow">➔</div>
    <div class="box">Modèle Supervisé<br>(CatBoost)</div>
</div>
</section>

<section>
<h2>5️⃣ Avantages</h2>
<ul>
    <li><strong>Pipeline complet</strong> : nettoyage → sentiment → features → modèle.</li>
    <li><strong>Multi-modalité</strong> : texte, catégorie, prix, image et sentiment.</li>
    <li><strong>Standardisation multilingue</strong> : cohérence entre langues.</li>
    <li><strong>CatBoost</strong> gère efficacement données hétérogènes pour prédire les <code>ratings</code> Amazon.</li>
</ul>
</section>

<script>
function openModal(imgElement) {
    var modal = document.getElementById("imgModal");
    var modalImg = document.getElementById("modalImg");
    var captionText = document.getElementById("modalCaption");
    modal.style.display = "block";
    modalImg.src = imgElement.src;
    captionText.innerHTML = imgElement.alt;
}
function closeModal() {
    document.getElementById("imgModal").style.display = "none";
}
</script>

</body>
</html>
